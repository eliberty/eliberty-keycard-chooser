{"version":3,"sources":["../../../src/components/KeyCardArea/KeyCardArea.jsx"],"names":["KeyCardArea","props","state","checkYes","checkNo","idCard","cardNumberList","handleClickCheckYes","bind","handleClickCheckNo","handleChangeCardNumber","handleChangeAutoSuggestCardNumber","setState","event","cardId","target","value","cardnumber","substr","set","changeCardNumber","orderitem","get","card","aux","className","keycards","params","cardNumber","toUpperCase","keycardTypes","size","map","renderedLabelTab","renderedKeyCardsTypesSome","renderedKeyCardsTypesOne","renderedListKeyCard","renderedContentCheckNo","renderedContentCheckYes","Component"],"mappings":"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","file":"KeyCardArea.js","sourcesContent":["import React from 'react';\nimport { PropTypes } from 'prop-types';\nimport { Map } from 'immutable';\nimport SVGInline from 'react-svg-inline';\nimport CardNumberField from '../CardNumberField/CardNumberField';\nimport questionSvg from '../images/questionImg';\n// import './KeyCardArea.scss';\n\n/**\n * Keycard area\n */\nclass KeyCardArea extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      checkYes: false,\n      checkNo: false,\n      idCard: 0,\n      cardNumberList: new Map(),\n    };\n    this.handleClickCheckYes = this.handleClickCheckYes.bind(this);\n    this.handleClickCheckNo = this.handleClickCheckNo.bind(this);\n    this.handleChangeCardNumber = this.handleChangeCardNumber.bind(this);\n    this.handleChangeAutoSuggestCardNumber = this.handleChangeAutoSuggestCardNumber.bind(this);\n  }\n\n  handleClickCheckYes() {\n    this.setState({\n      checkYes: true,\n      checkNo: false,\n    });\n  }\n\n  handleClickCheckNo() {\n    this.setState({\n      checkYes: false,\n      checkNo: true,\n    });\n  }\n\n  handleChangeCardNumber(event, cardId) {\n    this.handleChangeAutoSuggestCardNumber(event.target.value, cardId);\n  }\n\n  handleChangeAutoSuggestCardNumber(cardnumber, cardId) {\n    if (typeof cardnumber !== 'undefined') {\n      let cardNumberList = this.state.cardNumberList;\n\n      if (cardnumber.substr(0, 1) !== '_') {\n        cardNumberList = new Map();\n      }\n\n      cardNumberList = cardNumberList.set(cardId, cardnumber);\n      this.setState({ cardNumberList });\n      this.props.changeCardNumber(this.props.orderitem.get('id'), cardnumber);\n    }\n  }\n\n  renderedContentCheckNo() {\n    return (this.state.checkNo\n        ?\n        (\n          <div className=\"msgCheckNo\">\n            <p>\n              Vous ne disposez pas de carte pour ce skieur,\n              elle vous sera livrée ou mise à disposition.\n            </p>\n          </div>\n        )\n        : ''\n    );\n  }\n\n  renderedLabelTab(card) {\n    const aux = `card${card.get('id')}`;\n    let className = 'nav-item';\n\n    if (card.get('id') === this.state.idCard) {\n      className = `${className} active`;\n    }\n\n    return (\n      <li className={className} key={card.get('id')}>\n        <a\n          className=\"nav-link text-center\"\n          data-toggle=\"tab\"\n          role=\"tab\"\n          href={aux}\n          onClick={() => {\n            this.setState({\n              idCard: card.get('id'),\n            });\n          }}\n        >{card.get('label')}</a>\n      </li>\n    );\n  }\n\n  renderedKeyCardsTypesSome(card, cardNumberList, keycards, params) {\n    const aux = `card${card.get('id')}`;\n    let className = 'tab-pane fade in';\n    if (card.get('id') === this.state.idCard) {\n      className = `${className} active`;\n    }\n    const cardNumber = cardNumberList.get(card.get('id'), '');\n    return (\n      <div className={className} id={aux} role=\"tabpanel\" key={card.get('id')}>\n        <CardNumberField\n          id={card.get('id')}\n          mode={card.get('type').toUpperCase()}\n          keycards={keycards}\n          handleChangeCardNumber={(event) => {\n            this.handleChangeCardNumber(event, card.get('id'));\n          }}\n          onChange={(event) => {\n            this.handleChangeCardNumber(event, card.get('id'));\n          }}\n          onAutoSuggestSelected={(cardnumber) => {\n            this.handleChangeAutoSuggestCardNumber(cardnumber, card.get('id'));\n          }}\n          cardNumber={cardNumber.toUpperCase()}\n          value={cardNumber}\n          params={params}\n        />\n      </div>\n    );\n  }\n\n  renderedKeyCardsTypesOne(card, cardNumberList, params) {\n    const cardNumber = cardNumberList.get(card.get('id'), '');\n    return (\n      <CardNumberField\n        id={card.get('id')}\n        mode={card.get('type').toUpperCase()}\n        handleChangeCardNumber={(event) => {\n          this.handleChangeCardNumber(event, card.get('id'));\n        }}\n        onChange={(event) => {\n          this.handleChangeCardNumber(event, card.get('id'));\n        }}\n        onAutoSuggestSelected={(cardnumber) => {\n          this.handleChangeAutoSuggestCardNumber(cardnumber, card.get('id'));\n        }}\n        cardNumber={cardNumber.toUpperCase()}\n        value={cardNumber}\n        params={params}\n      />\n    );\n  }\n\n  renderedListKeyCard(keycardTypes, cardNumberList, keycards, params) {\n    return (keycardTypes.size > 1\n        ?\n        (\n          <div>\n            <ul className=\"nav nav-tabs nav-justified responsive-tabs\" role=\"tablist\">\n              {\n                keycardTypes.map(card => (this.renderedLabelTab(card)))\n              }\n            </ul>\n            <div className=\"tab-content\">\n              {\n                keycardTypes.map(card => (\n                  this.renderedKeyCardsTypesSome(card, cardNumberList, keycards, params)))\n              }\n            </div>\n          </div>\n        )\n        :\n        (\n          keycardTypes.map(card => (\n            this.renderedKeyCardsTypesOne(card, cardNumberList, params)))\n        )\n    );\n  }\n\n  renderedContentCheckYes(keycardTypes, cardNumberList, keycards, params) {\n    return (this.state.checkYes\n        ? (\n          <div className=\"msgCheckYes\">\n            { this.renderedListKeyCard(keycardTypes, cardNumberList, keycards, params) }\n            <a href=\"#\" className=\"infoKeyCard\">\n              <span>Où trouver mon numéro de carte ?</span>\n            </a>\n          </div>\n        ) : ''\n    );\n  }\n\n  render() {\n    const { keycardTypes, keycards, params } = this.props;\n    const { cardNumberList } = this.state;\n\n    return (\n      <div>\n        <div>\n        <p>J'ai une carte mains libres*</p>\n        <button type=\"button\" className=\"contentQuestion\" data-toggle=\"modal\" data-target=\"#myModal\">\n          {questionSvg}\n        </button>\n        <form>\n          <div className=\"form-group keyCardAreaForm\">\n            <input type=\"radio\" id=\"inputCheckOui\" name=\"card\" value=\"oui\" onClick={() => { this.handleClickCheckYes(); }} />\n            <label htmlFor=\"inputCheckOui\" className=\"keycardChoice\">oui</label>\n            <input type=\"radio\" id=\"inputCheckNo\" name=\"card\" value=\"non\" onClick={() => { this.handleClickCheckNo(); }} />\n            <label htmlFor=\"inputCheckNo\" className=\"keycardChoice\">non</label>\n            { this.renderedContentCheckNo() }\n            { this.renderedContentCheckYes(keycardTypes, cardNumberList, keycards, params) }\n          </div>\n        </form>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default KeyCardArea;\n"]}